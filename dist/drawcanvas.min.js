var DrawCanvas=function(t){function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var s={};return i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=0)}([function(t,i,s){"use strict";var e=s(1),n=s(2);t.exports=class{constructor(t,i){if(t.hasOwnProperty("length")&&(t=t[0]),"canvas"!==t.tagName.toLowerCase())throw new Error("Element is not a canvas.");this.canvas=t,this.context=this.canvas.getContext("2d"),this.started=!1,this.context.lineJoin="round",this.context.lineCap="round",this.memCanvas=document.createElement("canvas"),this.memCanvas.width=this.canvas.width,this.memCanvas.height=this.canvas.height,this.memCtx=this.memCanvas.getContext("2d"),this.undoHistory=[],this.renderer=new n(this.canvas),this.init(),this.setOptions(i),this.canvas.addEventListener("mousedown",this.eventCanvas.bind(this),!1),this.canvas.addEventListener("mousemove",this.eventCanvas.bind(this),!1),this.canvas.addEventListener("mouseup",this.eventCanvas.bind(this),!1),this.canvas.addEventListener("mouseout",this.eventCanvas.bind(this),!1)}setOptions(t){this.context.strokeStyle=e.rgb2hex(e.getStyleProp(this.canvas,"color")),this.context.lineWidth=5,this.period=5,this.onFinishLine=null,this.onClear=null,this.onUndo=null,"object"==typeof t&&null!=t&&("string"==typeof t.color&&(this.context.strokeStyle=t.color),"number"==typeof t.lineWidth&&(this.context.lineWidth=t.lineWidth),"number"==typeof t.period&&(this.period=t.period),"function"==typeof t.onFinishLine&&(this.onFinishLine=t.onFinishLine),"function"==typeof t.onClear&&(this.onClear=t.onClear),"function"==typeof t.onUndo&&(this.onUndo=t.onUndo),this.colorDefault=this.context.strokeStyle)}setColor(t){this.context.strokeStyle=t}revertDefaultColor(){this.context.strokeStyle=this.colorDefault}isEmpty(){return 0==this.lines.length}getLines(){return this.lines}undo(){if(this.undoHistory.pop(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.memCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.undoHistory.length>0){var t=this.undoHistory[this.undoHistory.length-1];this.context.drawImage(t,0,0),this.memCtx.drawImage(t,0,0)}let i=this.lines.pop();null!=this.onUndo&&this.onUndo(i,this)}init(){this.points=[],this.count=0,this.tempLine=[],this.lines=[],this.firstTimestamp=-1}eventCanvas(t){t.point={x:t.offsetX/this.canvas.offsetWidth,y:t.offsetY/this.canvas.offsetWidth};var i=this[t.type].bind(this);i&&i(t)}addDotToTempLine(t){let i=0;0==this.tempLine.length&&0==this.lines.length?(i=0,this.firstTimestamp=(new Date).getTime()):i=(new Date).getTime()-this.firstTimestamp,t.timestamp=i,this.tempLine.push(t)}finishLine(){var t=document.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,t.getContext("2d").drawImage(this.canvas,0,0),this.undoHistory.push(t),this.lines.push(this.tempLine),this.tempLine=[],null!=this.onFinishLine&&this.onFinishLine(this)}mousedown(t){this.count=0,this.addDotToTempLine(t.point),this.renderer.drawDot(this.context,t.point.x,t.point.y),this.memCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.memCtx.drawImage(this.canvas,0,0),this.points.push(t.point),this.started=!0,this.renderer.drawPoints(this.context,this.points)}mousemove(t){this.started&&(++this.count==this.period&&(this.addDotToTempLine(t.point),this.count=0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(this.memCanvas,0,0),this.points.push(t.point),this.renderer.drawPoints(this.context,this.points))}mouseup(t){this.started&&(this.started=!1,this.memCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.memCtx.drawImage(this.canvas,0,0),this.points=[],this.addDotToTempLine(t.point),this.finishLine())}mouseout(t){this.mouseup(t)}clear(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.memCtx.clearRect(0,0,this.canvas.width,this.canvas.height),this.undoHistory=[],this.init(),null!=this.onClear&&this.onClear(this)}}},function(t,i,s){"use strict";class e{static rgb2hex(t){function i(t){let i=Number(t);return i>255&&(i=255),1==(i=i.toString(16)).length&&(i="0"+i),i}var s=new RegExp(/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)$/);return null==(t=t.match(s))?"#000000":`#${i(t[1])}${i(t[2])}${i(t[3])}`}static getStyleProp(t,i){return window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(i):t.currentStyle?t.currentStyle[i]:void 0}}t.exports=e},function(t,i,s){"use strict";class e{constructor(t){this.canvasWidth=t.width}drawPoints(t,i){t.beginPath(),t.moveTo(i[0].x*this.canvasWidth,i[0].y*this.canvasWidth);for(var s=1;s<i.length-2;s++){var e=(i[s].x*this.canvasWidth+i[s+1].x*this.canvasWidth)/2,n=(i[s].y*this.canvasWidth+i[s+1].y*this.canvasWidth)/2;t.quadraticCurveTo(i[s].x*this.canvasWidth,i[s].y*this.canvasWidth,e,n)}s<i.length-1&&t.quadraticCurveTo(i[s].x*this.canvasWidth,i[s].y*this.canvasWidth,i[s+1].x*this.canvasWidth,i[s+1].y*this.canvasWidth),t.stroke()}drawDot(t,i,s){t.beginPath(),t.arc(i*this.canvasWidth,s*this.canvasWidth,t.lineWidth/2,0,2*Math.PI,!1),t.fillStyle=t.strokeStyle,t.fill()}}t.exports=e}]);